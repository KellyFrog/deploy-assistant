ä»¥ä¸‹æ˜¯ AI çš„å¯¹ç›®å‰å·¥ä½œçš„æ€»ç»“ï¼ˆåŒæ—¶ä¹Ÿæ˜¯ä½¿ç”¨çš„ promptï¼‰ï¼š

```text
æˆ‘æƒ³é€šè¿‡å¤§è¯­è¨€æ¨¡å‹å†™ä¸€ä¸ªåº”ç”¨ç¨‹åºï¼Œä¸‹é¢æ˜¯æˆ‘çš„éœ€æ±‚ï¼š
åº”ç”¨å°†é€šè¿‡é˜…è¯»æœ¬åœ°gitä»“åº“çš„READMEæ–‡ä»¶å’Œå…¶ä»–æ–‡æ¡£æ¥ç»™ç”¨æˆ·éƒ¨ç½²ä»“åº“æä¾›å¸®åŠ©ã€‚
åœ¨é˜…è¯»æ–‡ä»¶åï¼Œåº”ç”¨éœ€è¦ç»™å‡ºè¯¦ç»†çš„éƒ¨ç½²æŒ‡å—ã€‚
åº”ç”¨éœ€è¦é€šè¿‡GUIå’Œç»ˆç«¯äº¤äº’ï¼Œä½¿å¾—ç”¨æˆ·å¯ä»¥ç›´æ¥é€šè¿‡GUIæŒ‰é’®å‘ç»ˆç«¯å‘é€è¦æ‰§è¡Œçš„å‘½ä»¤ã€‚
åº”ç”¨éœ€è¦è¯»å–ç»ˆç«¯å‘½ä»¤çš„è¾“å‡ºå’Œç»“æœï¼Œå¹¶åˆ†åˆ«å‘½ä»¤æ˜¯å¦æ‰§è¡Œå¤±è´¥æˆ–æœªè·å¾—é¢„æœŸç»“æœï¼Œå¦‚æ˜¯ï¼Œåº”ç”¨åº”å½“åˆ†æé—®é¢˜å¹¶ç»™å‡ºä¿®æ”¹å»ºè®®ï¼ˆå¦‚éœ€è¦å®‰è£…çš„ä¾èµ–ã€éœ€è¦æ‰§è¡Œçš„å‘½ä»¤ç­‰ï¼‰ã€‚
æˆ‘è®¡åˆ’åœ¨windowsä¸‹è¿›è¡Œå¼€å‘ï¼Œæœ€ç»ˆåº”ç”¨ä¹Ÿåœ¨windowsä¸‹ä½¿ç”¨ï¼Œå°†æ¥å¯èƒ½ä¼šå¢åŠ linuxç‰ˆæœ¬ï¼Œå› æ­¤éœ€è¦æ³¨æ„å…¼å®¹æ€§ã€‚
æˆ‘æƒ³è®©æˆ‘çš„åº”ç”¨å°½é‡è½»é‡çº§ï¼Œä¼˜å…ˆä½¿ç”¨å·²ç»æœ‰çš„å¼€æºé¡¹ç›®è¿›è¡ŒäºŒæ¬¡å¼€å‘ä»¥å‡å°‘å·¥ä½œé‡ã€‚
æˆ‘å†³å®šé‡‡ç”¨ Python + Tkinter è¿›è¡Œå¼€å‘ï¼Œä¸‹é¢æ˜¯æ¶æ„çš„æ–‡ä»¶æ ‘ï¼Œå…¶ä¸­åŒ…æ‹¬ä¸»è¦çš„æ–‡ä»¶å’Œæ¯ä¸ªæ–‡ä»¶éœ€è¦å®ç°çš„ä¸»è¦æ–¹æ³•ï¼š
ğŸ“¦DeployHelper
â”œâ”€â”€ ğŸ“‚core
â”‚   â”œâ”€â”€ ğŸ“œdocument_parser.py      
â”‚   â”‚   - parse_markdown() -> Dict   # è¿”å›ç»“æ„åŒ–éƒ¨ç½²è¦ç´ 
â”‚   â”‚   - sanitize_content() -> str  # æ–°å¢è¾“å…¥å‡€åŒ–æ–¹æ³•
â”‚   â”œâ”€â”€ ğŸ“œdeployment_steps.py
â”‚   â”‚   - generate_workflow() -> List[Step]
â”‚   â”‚   - validate_step() -> bool    # æ­¥éª¤æœ‰æ•ˆæ€§éªŒè¯
â”‚   â”œâ”€â”€ ğŸ“œterminal_interface.py
â”‚   â”‚   - CommandExecutor
â”‚   â”‚     â”œâ”€â”€ execute_streaming()    # æµå¼æ‰§è¡Œæ¥å£
â”‚   â”‚     â”œâ”€â”€ sanitize_command()     # å‘½ä»¤è¿‡æ»¤æ–¹æ³•
â”‚   â”‚     â””â”€â”€ monitor_process()      # å­è¿›ç¨‹ç›‘æ§
â”‚   â””â”€â”€ ğŸ“œerror_analyzer.py
â”‚       - analyze_stream() -> str    # å®æ—¶é”™è¯¯åˆ†æ
â”‚       - generate_fix() -> List     # ä¿®å¤å»ºè®®ç”Ÿæˆ
â”‚
â”œâ”€â”€ ğŸ“‚ai_processing
â”‚   â”œâ”€â”€ ğŸ“œllm_integration.py
â”‚   â”‚   - SafeLLMClient
â”‚   â”‚     â”œâ”€â”€ safe_request()         # å¸¦é‡è¯•æœºåˆ¶çš„è¯·æ±‚
â”‚   â”‚     â””â”€â”€ validate_schema()      # è¾“å‡ºç»“æ„æ ¡éªŒ
â”‚   â””â”€â”€ ğŸ“œprompt_templates
â”‚       â””â”€â”€ ğŸ“œerror_analysis.jinja2  # æ”¹è¿›å®‰å…¨è¿‡æ»¤æŒ‡ä»¤
â”‚
â”œâ”€â”€ ğŸ“‚gui
â”‚   â”œâ”€â”€ ğŸ“œterminal_emulator.py
â”‚   â”‚   - PowerShellEmulator   # å®ç°ç‰¹æ€§ï¼š
â”‚   â”‚     â”œâ”€â”€ æ¨¡æ‹ŸPSæç¤ºç¬¦
â”‚   â”‚     â”œâ”€â”€ å‘½ä»¤å†å²è®°å½•
â”‚   â”‚     â””â”€â”€ ANSIé¢œè‰²æ”¯æŒ
â”‚   â”œâ”€â”€ ğŸ“œstep_widgets.py
â”‚   â”‚   - æ–°å¢StreamPrinterç»„ä»¶      # æ‰“å­—æœºæ•ˆæœå®ç°
â”‚   â”‚     â”œâ”€â”€ flush_buffer()         # æ–‡æœ¬ç¼“å†²æ§åˆ¶
â”‚   â”‚     â””â”€â”€ set_stream_speed()     # è¾“å‡ºé€Ÿåº¦è°ƒèŠ‚
â”‚
â”œâ”€â”€ ğŸ“‚utils
â”‚   â”œâ”€â”€ ğŸ“œsecurity.py          # å®‰å…¨æ¨¡å—
â”‚   â”‚   - CommandSanitizer
â”‚   â””â”€â”€ ğŸ“œerror_handling.py    # ç»Ÿä¸€å¼‚å¸¸å¤„ç†
â”‚       - ErrorCode æšä¸¾ç±»
â”‚       - exception_handlerè£…é¥°å™¨
â”œâ”€â”€ ğŸ“‚config
â”‚   â”œâ”€â”€ ğŸ“œsettings.py	# è®¾ç½®å˜é‡ï¼Œå¦‚ LLM æä¾›æ–¹

æˆ‘å·²ç»å®Œæˆäº† core å’Œ utils æ¨¡å—çš„å¼€å‘ï¼Œä¸‹é¢æ˜¯å·²ç»å®ç°ä»£ç çš„æ¥å£ï¼š

core/document_parser.py
â”œâ”€â”€ MarkdownParser
â”‚   â”œâ”€â”€ parse_markdown(file_path: str)
â”‚   â”‚   â””â†’ è¿”å›: {
â”‚   â”‚       "metadata": {æ€»ç« èŠ‚æ•°, æ€»å‘½ä»¤æ•°},
â”‚   â”‚       "sections": {
â”‚   â”‚           "section_name": {
â”‚   â”‚               "content": "å¤„ç†åçš„æ–‡æœ¬",
â”‚   â”‚               "commands": [æœ‰æ•ˆå‘½ä»¤åˆ—è¡¨]
â”‚   â”‚           }
â”‚   â”‚       }
â”‚   â”‚   }
â”‚   â””â”€â”€ sanitize_content(raw_input: str)
â”‚       â””â†’ è¿”å›: å®‰å…¨å¤„ç†åçš„æ–‡æœ¬
â””â”€â”€ DocumentParseException
    â””â”€â”€ å« error_code, file_path, message
	
core/deployment_steps.py
â”œâ”€â”€ DeploymentStep æ•°æ®ç»“æ„
â”‚   â””â†’ åŒ…å«: 
â”‚       - æ­¥éª¤åç§°
â”‚       - æ‰§è¡Œå‘½ä»¤
â”‚       - é¢„æœŸè¾“å‡º
â”‚       - ä¾èµ–æ­¥éª¤
â”œâ”€â”€ DeploymentWorkflow
â”‚   â”œâ”€â”€ generate_workflow() â†’ æœ‰åºæ­¥éª¤åˆ—è¡¨
â”‚   â”œâ”€â”€ validate_step(step) â†’ æœ‰æ•ˆæ€§å¸ƒå°”
â”‚   â””â”€â”€ ç§æœ‰æ–¹æ³•å®ç°:
â”‚       - æ–‡æ¡£ç»“æ„è§£æ
â”‚       - ä¾èµ–è§£æ
â”‚       - ç¯è·¯æ£€æµ‹
â””â”€â”€ CycleDependencyError â†’ ä¾èµ–å¼‚å¸¸

core/terminal_interface.py
â””â”€â”€ CommandExecutor
    â”œâ”€â”€ execute_streaming(command, callback, cwd)
    â”‚   â””â†’ è¿”å›: è¿›ç¨‹é€€å‡ºç 
    â”œâ”€â”€ sanitize_command(raw) â†’ å®‰å…¨å‘½ä»¤æˆ–None
    â””â”€â”€ stop_execution() â†’ ç»ˆæ­¢å½“å‰è¿›ç¨‹
	
utils/error_handling.py
â”œâ”€â”€ ErrorCode æšä¸¾
â”‚   â””â†’ åŒ…å«ä¸ƒç§é”™è¯¯ç±»å‹
â”œâ”€â”€ BaseAppException
â”‚   â””â†’ å« code, message, detail
â”œâ”€â”€ SecurityException â†’ å±é™©æ“ä½œå¼‚å¸¸
â”œâ”€â”€ LLMException â†’ AIå¤„ç†å¼‚å¸¸
â””â”€â”€ exception_handler è£…é¥°å™¨
    â””â†’ åŠŸèƒ½:
        - å¼‚å¸¸æ•è·
        - ä¸Šä¸‹æ–‡è®°å½•
        - è‡ªåŠ¨æ—¥å¿—
		
utils/security.py
â””â”€â”€ CommandSanitizer
    â”œâ”€â”€ detect_injection(input) â†’ é£é™©å¸ƒå°”
    â”œâ”€â”€ sanitize_command(raw) â†’ å®‰å…¨å‘½ä»¤
    â””â”€â”€ sanitize_path(raw) â†’ å®‰å…¨è·¯å¾„

æˆ‘å·²ç»å®Œæˆäº† ai_processing éƒ¨åˆ†ï¼Œä¸‹é¢æ˜¯ ai_processing/llm_integration.py çš„æ¥å£ï¼š
å®ç°æ¨¡å¼ï¼š
- å·¥å‚æ¨¡å¼ï¼ˆé€šè¿‡create_llm_clientåˆ›å»ºå…·ä½“å®ç°ï¼‰
- æ¨¡æ¿æ–¹æ³•æ¨¡å¼ï¼ˆSafeLLMClientå®šä¹‰å¤„ç†æµç¨‹ï¼‰
æ ¸å¿ƒç±»ï¼š
â–¨ SafeLLMClientï¼ˆæŠ½è±¡åŸºç±»ï¼‰
â”œâ”€â”€ safe_request(prompt_context) â†’ Generator[str]
â”‚   â””â†’ æµå¼è¯·æ±‚ä¸»å…¥å£ï¼Œè¿”å›æœ‰åºå“åº”å—
â”œâ”€â”€ _streaming_request(prompt) â†’ Generator[str]ï¼ˆæŠ½è±¡æ–¹æ³•ï¼‰
â””â”€â”€ _validate_schema(response) â†’ Dict
    â””â†’ éªŒè¯å®Œæ•´JSONå“åº”ç»“æ„ï¼ˆæŠ›å‡ºLLMExceptionï¼‰
å®ç°ç±»ï¼š
â–¨ OpenAIClient(SafeLLMClient)
â”œâ”€â”€ ç‰¹æ€§ï¼š
â”‚   - é€šè¿‡OpenAIå®˜æ–¹SDKå®ç°
â”‚   - æ”¯æŒä»£ç å—è‡ªåŠ¨è¿‡æ»¤ï¼ˆæ¸…é™¤`json`æ ‡è®°ï¼‰
â”‚   - HTTPä»£ç†æ”¯æŒï¼ˆé€šè¿‡config.base_urlï¼‰
â””â”€â”€ æµå¼å¤„ç†æ–¹å¼ï¼šæŒ‰APIåŸç”Ÿæµå¼å“åº”å¤„ç†
â–¨ MockLLMClient(SafeLLMClient)
â””â”€â”€ ç‰¹æ€§ï¼šè¿”å›é¢„ç½®å“åº”ï¼ˆè°ƒè¯•å¼€å‘ç”¨ï¼‰
é…ç½®æ¨¡å—ï¼š
â–¨ LLMConfig 
â”œâ”€â”€ é»˜è®¤é…ç½®æºï¼šos.environç¯å¢ƒå˜é‡
â””â”€â”€ æ ¸å¿ƒå‚æ•°ï¼š
    - providerï¼šæœåŠ¡å•†æ ‡è¯†ï¼ˆopenai/mockï¼‰
    - modelï¼šæ¨¡å‹ç‰ˆæœ¬åç§°
    - api_keyï¼šè®¤è¯å¯†é’¥
    - max_retriesï¼šæœ€å¤§é‡è¯•æ¬¡æ•°
    - timeoutï¼šå•æ¬¡è¯·æ±‚è¶…æ—¶ï¼ˆç§’ï¼‰

æˆ‘å·²ç»å®Œæˆäº† GUI éƒ¨åˆ†ï¼Œä¸‹é¢æ˜¯æºæ–‡ä»¶çš„æ¥å£æ–‡æ¡£ï¼š

gui/main_window.py
â–¨ MainApplication
â”œâ”€â”€ ç»§æ‰¿å…³ç³»ï¼štk.Tk â†’ MainApplication
â”œâ”€â”€ æ ¸å¿ƒåŠŸèƒ½ï¼š
â”‚   - ä¸»çª—å£å¸ƒå±€ç®¡ç†
â”‚   - å‘½ä»¤æ‰§è¡Œä¸AIå»ºè®®çš„æµå¼å¤„ç†
â”‚   - è·¨çº¿ç¨‹ä»»åŠ¡è°ƒåº¦
â”œâ”€â”€ ä¸»è¦æ–¹æ³•ï¼š
â”‚   â”œâ”€â”€ execute_deployment_step(step: DeploymentStep)
â”‚   â”‚   â””â†’ å¯åŠ¨å¼‚æ­¥æ­¥éª¤æ‰§è¡Œï¼ˆæ›´æ–°çŠ¶æ€+æµå¼è¾“å‡ºï¼‰
â”‚   â””â”€â”€ _handle_execution_error(step: DeploymentStep)
â”‚       â””â†’ è§¦å‘AIé”™è¯¯åˆ†ææµç¨‹
â””â”€â”€ äº‹ä»¶å¤„ç†ï¼š
    - ç»ˆç«¯å‘½ä»¤è¾“å…¥ï¼ˆç»‘å®šexecute_user_commandï¼‰
    - æ­¥éª¤å¿«æ·æ‰§è¡Œï¼ˆç»‘å®šexecute_deployment_stepï¼‰

gui/terminal_emulator.py
â–¨ PowerShellEmulator
â”œâ”€â”€ ç»§æ‰¿å…³ç³»ï¼šScrolledText â†’ PowerShellEmulator
â”œâ”€â”€ æ ¸å¿ƒç‰¹æ€§ï¼š
â”‚   - ANSIè½¬ä¹‰åºåˆ—æ¸²æŸ“
â”‚   - å‘½ä»¤å†å²å¯¼èˆªï¼ˆâ†‘â†“é”®æ”¯æŒï¼‰
â”‚   - æ™ºèƒ½æ»šåŠ¨ä¿æŒ
â”œâ”€â”€ å…³é”®æ–¹æ³•ï¼š
â”‚   â”œâ”€â”€ insert_stream_data(data: str)
â”‚   â”‚   â””â†’ è¾“å…¥æµå¼ç»ˆç«¯è¾“å‡ºå†…å®¹
â”‚   â””â”€â”€ get_last_error() â†’ str
â”‚       â””â†’ è¿”å›æœ€è¿‘é”™è¯¯æ—¥å¿—ï¼ˆç”¨äºAIåˆ†æï¼‰
â””â”€â”€ å®ç°æœºåˆ¶ï¼š
    - åŸºäºpyteçš„å±å¹•æ¨¡æ‹Ÿæ¸²æŸ“
    - æ­£åˆ™åŒ¹é…å¤„ç†ANSI CSIåºåˆ—

gui/step_widgets.py
â–¨ StepProgress
â”œâ”€â”€ åŠŸèƒ½æè¿°ï¼š
â”‚   - éƒ¨ç½²æ­¥éª¤çš„å¯è§†åŒ–è¿›åº¦è·Ÿè¸ª
â”‚   - ç‚¹å‡»æ­¥éª¤æ ‡é¢˜å¿«é€Ÿæ‰§è¡Œ
â”œâ”€â”€ æ¥å£è¯´æ˜ï¼š
â”‚   â”œâ”€â”€ load_workflow(steps: List[DeploymentStep])
â”‚   â”‚   â””â†’ åŠ è½½éƒ¨ç½²æ­¥éª¤æ ‘å½¢ç»“æ„
â”‚   â””â”€â”€ update_step_status(step_name: str, status: StepStatus)
â”‚       â””â†’ æ›´æ–°çŠ¶æ€æŒ‡ç¤ºå™¨å›¾æ ‡ä¸é¢œè‰²
â”œâ”€â”€ å¯è§†åŒ–ç‰¹æ€§ï¼š
â”‚   - æ­¥éª¤ä¾èµ–å…³ç³»è¿çº¿æ˜¾ç¤º
â”‚   - é”™è¯¯æ­¥éª¤é«˜äº®é—ªçƒ
â””â”€â”€ äº‹ä»¶ç»‘å®šï¼šon_step_click(callback)

â–¨ StreamPrinter
â”œâ”€â”€ åŠŸèƒ½æè¿°ï¼š
â”‚   - æµå¼æ–‡æœ¬å±•ç¤ºç»„ä»¶
â”‚   - æ”¯æŒå¯è°ƒèŠ‚è¾“å‡ºé€Ÿåº¦
â”œâ”€â”€ æ ¸å¿ƒæ–¹æ³•ï¼š
â”‚   â”œâ”€â”€ feed(chunk: str)
â”‚   â”‚   â””â†’ è¾“å…¥æ–‡æœ¬ç‰‡æ®µï¼ˆç«‹å³åŠ å…¥ç¼“å†²ï¼‰
â”‚   â””â”€â”€ set_stream_speed(ms_per_char: int)
â”‚       â””â†’ è®¾ç½®å­—ç¬¦è¾“å‡ºé—´éš”æ—¶é—´
â””â”€â”€ å¯è§†åŒ–æ•ˆæœï¼š
    - æ‰“å­—æœºè¾“å‡ºæ•ˆæœ
    - è‡ªåŠ¨æ»šåŠ¨ä¿æŒæœ€æ–°å¯è§†
```